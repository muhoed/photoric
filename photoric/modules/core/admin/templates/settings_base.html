<!-- Site administration interface -->
{% extends 'base_layout.html' %}
{% import 'admin/layout.html' as layout with context -%}
{% import 'admin/static.html' as admin_static with context %}

{% if admin_view.category %}
    {% set category_title = admin_view.category + ' - ' %}
{% else %}
    {% set category_title = '' %}
{% endif %}
    {% set title = category_title + admin_view.name + ' - ' + admin_view.admin.name %}

    {% block head_css %}
        {{ super() }}
        {% if admin_view.extra_css %}
          {% for css_url in admin_view.extra_css %}
            <link href="{{ css_url }}" rel="stylesheet">
          {% endfor %}
        {% endif %}
        <style>
            .hide {
                display: none;
            }
        </style>
    {% endblock %}

    {% block main %}  
        
        {% block page_body %}
            <div class="container{% if config.get('FLASK_ADMIN_FLUID_LAYOUT', False) %}-fluid{% endif %}">
                <nav class="navbar navbar-expand-lg navbar-dark bg-dark mb-2" role="navigation">
                    <!-- Brand and toggle get grouped for better mobile display -->
                    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#admin-navbar-collapse"
                            aria-controls="admin-navbar-collapse" aria-expanded="false" aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon"></span>
                    </button>
                    <!-- navbar content -->
                    <div class="collapse navbar-collapse" id="admin-navbar-collapse">
                    {% block brand %}
                        <a class="navbar-brand" href="{{ admin_view.admin.url }}">{{ admin_view.admin.name }}</a>
                    {% endblock %}
                    {% block main_menu %}
                        <ul class="navbar-nav mr-auto">
                            {{ layout.menu() }}
                        </ul>
                    {% endblock %}

                        {% block menu_links %}
                        <ul class="nav navbar-nav navbar-right">
                            {{ layout.menu_links() }}
                        </ul>
                        {% endblock %}
                    {% block access_control %}
                    {% endblock %}
                    </div>
                </nav>

                {% block messages %}
                    {{ layout.messages() }}
                {% endblock %}

                {# store the jinja2 context for form_rules rendering logic #}
                {% set render_ctx = h.resolve_ctx() %}

                {% block body %}{% endblock %}
            </div>
        {% endblock %}

    {% endblock %}

    {% block tail_js %}
        {{ super() }}
        <script src="{{ admin_static.url(filename='vendor/moment.min.js', v='2.9.0') }}" type="text/javascript"></script>
        <script src="{{ admin_static.url(filename='vendor/bootstrap4/util.js', v='4.3.1') }}" type="text/javascript"></script>
        <script src="{{ admin_static.url(filename='vendor/bootstrap4/dropdown.js', v='4.3.1') }}" type="text/javascript"></script>
        <script src="{{ admin_static.url(filename='vendor/select2/select2.min.js', v='4.2.1') }}"
                type="text/javascript"></script>
        <script src="{{ admin_static.url(filename='vendor/multi-level-dropdowns-bootstrap/bootstrap4-dropdown-ml-hack.js') }}" type="text/javascript"></script>
        <script src="{{ admin_static.url(filename='admin/js/helpers.js', v='1.0.0') }}" type="text/javascript"></script>
        {% if admin_view.extra_js %}
            {% for js_url in admin_view.extra_js %}
                <script src="{{ js_url }}" type="text/javascript"></script>
            {% endfor %}
        {% endif %}
    {% endblock %}